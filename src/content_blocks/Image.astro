---
import MediaControls from '../components/project_detail/MediaControls.astro';
import { imageSizeFromFile } from 'image-size/fromFile';
import FrameView from '../components/project_detail/FrameView.astro';
import type { ContentBlockData, ImageProperties } from '../scripts/interfaces';

interface Props extends ContentBlockData<ImageProperties> {}
const { project, contentBlock } = Astro.props;

const imagePath = `/assets/projects/${project.name}/${contentBlock.properties.data}`
const size = await imageSizeFromFile('./public/' + imagePath);
const inset = contentBlock.properties.inset ? ' inset' : '';
---

<FrameView
	project={project}
	contentBlock={contentBlock}
	width={size.width}
	height={size.height}
>
	<img
		src={imagePath}
		class={"project-detail-image" + inset}
		onload="fadeIn(this);"
	/>
	<MediaControls
		name={contentBlock.properties.data}
		path={imagePath}
	/>
</FrameView>

<style>
	.project-detail-image {
		opacity: 0;
		width: 100%;
		height: 100%;
	}

	.project-detail-image.inset {
		margin-top: -2px;
		box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 8px 20px 0 rgba(0, 0, 0, 0.2);
	}

	@media (max-width: 776px) {
		.project-detail-image.inset {
			margin-top: -1px;
		}
	}
</style>