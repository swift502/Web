---
import { codeToHtml } from 'shiki'

import ContentBlock from '../components/content_block/ContentBlock.astro';
import ContentDescription from "../components/content_block/ContentDescription.astro";
import '../styles/tiles.css';

const { project, contentBlock } = Astro.props;

const html = await codeToHtml(contentBlock.properties.data, {
  lang: 'javascript',
  theme: 'material-theme-lighter'
})

const contentBlockId = "code-block-" + contentBlock.index;
const borderClass = 'desc' in contentBlock.properties ? ' border-radius-top' : ' border-radius-full';

---

<ContentBlock>
    <div
        id={contentBlockId}
        class={"code-window" + borderClass}
        data-code={contentBlock.properties.data}
        set:html={html}>
        <a href={contentBlock.properties.link} class="code-file">{contentBlock.properties.file}</div>
    </div>
    <ContentDescription contentBlock={contentBlock} parentId={contentBlockId} />
</ContentBlock>

<style>
    .code-window {
        position: relative;
        /* height: 100%; */
        /* overflow-y: scroll; */
        /* overflow-y: visible; */
    }

    .code-file {
        position: absolute;
        font-size: 16px;
        /* font-family: monospace; */
        color: #90A4AE;
        font-weight: normal;
        top: 20px;
        right: 10px;
    }

    .code-file:hover {
        text-decoration: underline;
    }

    .tile {
		padding: 11px 12px;
	}

	.tile-icon {
		height: 25px;
	}

	.tile-icon img {
		height: 25px;
		width: 25px;
	}

</style>

<style is:global>
    pre {
        /* height: 100%; */
        margin: 0;
        padding: 20px 30px;
        text-align: left;
        /* box-sizing: border-box; */
        /* overflow-y: scroll; */
        overflow: auto;
    }

    pre, code {
        line-height: normal;
    }

    code span {
        font-size: 16px;
        font-family: monospace;
    }
</style>